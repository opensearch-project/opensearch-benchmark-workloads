{
  "name": "clickbench",
  "description": "Indexes the ClickBench dataset and runs OpenSearch PPL queries to benchmark analytical use case performance",
  "default": true,
  "schedule": [
    {% with default_index_settings={}, index_name="clickbench" %}
    {{ benchmark.collect(parts="../../common_operations/workload_setup.json") }},
    {% endwith %}
    {{ benchmark.collect(parts="common/clickbench-schedule.json") }}
  ]
},
{
  "name": "clickbench-test",
  "description": "Lightweight test procedure for validating ClickBench workload setup and basic functionality",
  "default": false,
  "schedule": [
    {% with default_index_settings={}, index_name="clickbench" %}
    {{ benchmark.collect(parts="../../common_operations/workload_setup.json") }},
    {% endwith %}
    {{ benchmark.collect(parts="common/test-schedule.json") }}
  ]
},
{
  "name": "dsl-clickbench",
  "description": "Indexes the whole document corpus using OpenSearch default settings and runs DSL (Domain-Specific Language) queries. The DSL queries were converted from PPL via OpenSearch's _plugins/_sql/_explain API.",
  "default": false,
  "schedule": [
    {% with default_index_settings={}, index_name="clickbench" %}
    {{ benchmark.collect(parts="../../common_operations/workload_setup.json") }},
    {% endwith %}
    {{ benchmark.collect(parts="common/dsl-clickbench-schedule.json") }}
  ]
},
{
  "name": "dsl-clickbench-test",
  "description": "Lightweight test procedure for validating ClickBench workload setup and basic functionality. Runs DSL (Domain-Specific Language) queries. The DSL queries were converted from PPL via OpenSearch's _plugins/_sql/_explain API.",
  "default": false,
  "schedule": [
    {% with default_index_settings={}, index_name="clickbench" %}
    {{ benchmark.collect(parts="../../common_operations/workload_setup.json") }},
    {% endwith %}
    {{ benchmark.collect(parts="common/dsl-clickbench-test-schedule.json") }}
  ]
},
{
  "name": "datafusion-ppl",
  "description": "Indexes the ClickBench dataset and runs OpenSearch PPL queries to benchmark analytical use case performance. Specific to the datafusion branch.",
  "default": false,
  "schedule": [
    {% with default_index_settings={}, index_name="clickbench" %}
    {{ benchmark.collect(parts="../../common_operations/delete_index.json") }},
    {{ benchmark.collect(parts="../../common_operations/create_index.json") }},
    {{ benchmark.collect(parts="../../common_operations/check_cluster_health.json") }},
    {{ benchmark.collect(parts="../../common_operations/index_append.json") }},
    {% endwith %}
    {
      "operation": "flush-index",
      "warmup-iterations": {{ flush_index_warmup_iterations or warmup_iterations | default(1) | tojson }},
      "iterations": {{ flush_index_iterations or test_iterations | default(1) | tojson }},
      "target-throughput": {{ flush_index_target_throughput or target_throughput | default(1) | tojson }},
      "clients": {{ flush_index_clients or search_clients | default(1) }}
    },
    {{ benchmark.collect(parts="common/mustang-clickbench-schedule.json") }}
  ]
}