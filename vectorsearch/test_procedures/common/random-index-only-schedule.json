{
    "operation": {
        "name": "delete-target-index",
        "operation-type": "delete-index",
        "only-if-exists": true,
        "index": "{{ target_index_name | default('target_index') }}"
    }
},
{
    "operation": {
        "name": "create-target-index",
        "operation-type": "create-index",
        "index": "{{ target_index_name | default('target_index') }}"
    }
},
{
    "operation": {
        "name": "random-vector-indexing",
        "operation-type": "bulk",
        "param-source": "random-vector-bulk-param-source",
        "dims": {{ target_index_dimension | default(768) | int }},
        "index_name": "{{ target_index_name | default('target_index') }}",
        "field" : "{{ target_field_name | default('target_field') }}",
        "partitions": {{ partitions | default(1000) | int }},
        "bulk-size": {{ target_index_bulk_size | default(100)}},
        "detailed-results": true
    },
    "clients": {{ indexing_clients | default(10) | int }},
    "iterations": {{ index_iterations | default(1) | int }}
    {%- if index_target_throughput is defined %}
    ,"target-throughput": {{ index_target_throughput | int }}
    {%- endif %}
},
{
    "name" : "refresh-target-index",
    "operation" : "refresh-target-index"
}
