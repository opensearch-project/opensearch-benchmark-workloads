{% if distribution_version is not defined %}
  {% set distribution_version = "3.3.0" %}
{% endif %}

{% if distribution_version.split('.') | map('int') | list  >= "3.3.0".split('.') | map('int') | list and distribution_version.split('.') | map('int') | list  < "6.0.0".split('.') | map('int') | list %}
    {
        "name": "grpc-index-append",
        "operation": "grpc-index-append",
        "warmup-time-period": {{ warmup_time_period | default(120) | tojson }},
        "clients": {{bulk_indexing_clients | default(8)}},
        "ignore-response-error-level": "{{error_level | default('non-fatal')}}"
    },
    {
        "name": "refresh-after-index",
        "operation": "refresh"
    }
{% endif %}