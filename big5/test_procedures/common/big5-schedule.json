{
  "operation": "delete-index"
},
{
  "operation": {
    "operation-type": "create-index",
    "settings": {{index_settings | default({}) | tojson}}
  }
},
{
  "name": "check-cluster-health",
  "operation": {
    "operation-type": "cluster-health",
    "index": "{{index_name | default('big5')}}",
    "request-params": {
      "wait_for_status": "{{cluster_health | default('green')}}",
      "wait_for_no_relocating_shards": "true"
    },
    "retry-until-success": true
  }
},
{
  "operation": "index-append",
  "warmup-time-period": 240,
  "clients": {{bulk_indexing_clients | default(8)}},
  "ignore-response-error-level": "{{error_level | default('non-fatal')}}"
},
{
  "name": "refresh-after-index",
  "operation": "refresh"
},
{
  "operation": {
    "operation-type": "force-merge",
    "request-timeout": 7200{%- if max_num_segments is defined %},
    "max-num-segments": {{ max_num_segments | tojson }}
    {%- endif %}
  }
},
{
  "name": "refresh-after-force-merge",
  "operation": "refresh"
},
{
  "name": "wait-until-merges-finish",
  "operation": {
    "operation-type": "index-stats",
    "index": "_all",
    "condition": {
      "path": "_all.total.merges.current",
      "expected-value": 0
    },
    "retry-until-success": true,
    "include-in-reporting": false
  }
},
{
  "operation": "default",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "desc_sort_timestamp",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "asc_sort_timestamp",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "desc_sort_with_after_timestamp",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "asc_sort_with_after_timestamp",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "desc_sort_timestamp_can_match_shortcut",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "desc_sort_timestamp_no_can_match_shortcut",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "asc_sort_timestamp_can_match_shortcut",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "asc_sort_timestamp_no_can_match_shortcut",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "name": "term",
  "operation": "term",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{% if distribution_version.split('.') | map('int') | list  >= "2.11.0".split('.') | map('int') | list and distribution_version.split('.') | map('int') | list  < "6.0.0".split('.') | map('int') | list %}
  {
    "operation": "multi_terms-keyword",
    "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
    "iterations": {{ test_iterations | default(100) | tojson }},
    "target-throughput": {{ target_throughput | default(2) | tojson }},
    "clients": {{ search_clients | default(1) }}
  },
{% endif %}
{
  "operation": "keyword-terms",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "keyword-terms-low-cardinality",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "composite-terms",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "composite_terms-keyword",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "composite-date_histogram-daily",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "range",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "range-numeric",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "keyword-in-range",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "date_histogram_hourly_agg",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "date_histogram_minute_agg",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "scroll",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "query-string-on-message",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "query-string-on-message-filtered",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "query-string-on-message-filtered-sorted-num",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "sort_keyword_can_match_shortcut",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "sort_keyword_no_can_match_shortcut",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "sort_numeric_desc",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "sort_numeric_asc",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "sort_numeric_desc_with_match",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "sort_numeric_asc_with_match",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "range_field_conjunction_big_range_big_term_query",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "range_field_disjunction_big_range_small_term_query",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "range_field_conjunction_small_range_small_term_query",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "range_field_conjunction_small_range_big_term_query",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "range-auto-date-histo",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "range-auto-date-histo-with-metrics",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "range-agg-1",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "range-agg-2",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "cardinality-agg-low",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
},
{
  "operation": "cardinality-agg-high",
  "warmup-iterations": {{ warmup_iterations | default(200) | tojson }},
  "iterations": {{ test_iterations | default(100) | tojson }},
  "target-throughput": {{ target_throughput | default(2) | tojson }},
  "clients": {{ search_clients | default(1) }}
}
